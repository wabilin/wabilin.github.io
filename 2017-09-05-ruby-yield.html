<!DOCTYPE html><html lang="en"><head>
    <meta name="author" content="wabilin">

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Explosion! | [Ruby] Yield 筆記</title>

    <link rel="stylesheet" type="text/css" href="./style.css">
    <link rel="alternate" type="application/rss+xml" href="./feed.xml">

    <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.0.0/build/styles/github.min.css">
    <script>
      function onHighlightLoad() {
        hljs.initHighlightingOnLoad();
      }
    </script>
    <script defer="" onload="onHighlightLoad()" src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.0.0/build/highlight.min.js">
    </script>
  <meta property="og:type" content="article"><meta property="og:title" content="[Ruby] Yield 筆記"><meta property="article:published_time" content="2017-09-05T00:00:00.000Z"><meta property="article:tag" content="ruby"><meta property="article:license" content="cc-by-sa"></head>

  <body>
    <div class="post">
      <header class="blog-title">
        <h1>
          <a href="./">(∩ ◕_▩ )⊃━☆ Explosion!!</a>
        </h1>
      </header>

      <section id="main" class="post-section"><hgroup><h2>[Ruby] Yield 筆記</h2><h6>2017-09-05</h6></hgroup> <article>
    <p>關於 <code>yield</code> 這個關鍵字，我剛學 Ruby 的時候逃避了。</p>
<p>現在重看一次，發現其實不是什麼太困難的東西。</p>
<p>簡單說， 就是一個執行之後使用者自訂 block 的語法。</p>
<!-- more -->
<p>用一個例子把做法記起來最快：</p>
<pre><code class="language-rb">def foo
  val = 1
  yield val
end

foo { |x| puts x }
# =&gt; 1</code></pre>
<p>可以發現在 <code>yield</code> 的部分把 block 掛進去了。
事實上這兩種寫法意義是差不多的：</p>
<pre><code class="language-rb">def foo
  val = 1
  yield val
end

def foo2(&amp;block)
  val = 2
  block.call(val)
end

foo { |x| puts x }
foo2 { |x| puts x }

# =&gt; 1
# =&gt; 2</code></pre>
<p>我個人更喜歡 <code>foo2</code> 那樣明確的寫法，一目瞭然，新手老手都看得懂。</p>
<p>然而參與 Ruby 相關專案，一定還是得了解 <code>yield</code> 該如何使用，畢竟很多 Ruby 人偏好看起來簡短的做法。</p>
<p>了解怎麼用 <code>yield</code> 和 block 以後，也就可以了解一些 Ruby 慣用做法的製造方式了。</p>
<p>例如最常用的 <code>each</code> 方法，現在也可以試著自己寫一個：</p>
<pre><code class="language-rb">class MyArray
  def initialize(src_ary)
    @ary = src_ary.clone
  end

  def each
    @ary.each do |x|
      yield x
    end
  end
end

my_array = MyArray.new([1, 2, 3])
my_array.each { |ele| puts 2 * ele }

# =&gt; 2
# =&gt; 4
# =&gt; 6</code></pre>
<p>簡單吧 :)</p>

  </article><div class="license-area">
  <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">
    <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png">
  </a>
  <br>
  This work is licensed under a
  <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">
    Creative Commons Attribution-ShareAlike 4.0 International License
  </a>.
</div></section>

      <footer class="footer-back">
        <a href="./">← back</a>
      </footer>
    </div>

    <footer class="page-footer">
      Subscribe via
      <a href="https://wabilin.github.io/feed.xml">
        RSS
      </a>.
    </footer>
  

</body></html>